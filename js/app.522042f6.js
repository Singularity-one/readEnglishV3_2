(function(){"use strict";var e={6238:function(e,t,n){var s=n(5130),o=n(6768);const a={id:"app"};function i(e,t,n,s,i,r){const c=(0,o.g2)("RouterLink"),l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",a,[t[2]||(t[2]=(0,o.Lk)("h1",null,"Learn English",-1)),(0,o.bF)(c,{to:"/Listsentencelevel",onClick:t[0]||(t[0]=e=>r.transPage("/Listsentencelevel"))},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Listsentencelevel")]))),_:1}),t[3]||(t[3]=(0,o.eW)("¬† ")),(0,o.bF)(l)])}n(4114);var r={name:"App",components:{},methods:{transPage(e){console.log("item",e),this.$router.push(`${e}`)}}},c=n(1241);const l=(0,c.A)(r,[["render",i]]);var d=l,u=n(1387);const h={class:"sentence-level-page"},p={class:"container"},g={class:"level-cards"},v={class:"back-link"};function k(e,t,n,s,a,i){const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",p,[t[7]||(t[7]=(0,o.Lk)("h2",{class:"page-title"},"Áü≠Âè•Á∑¥Áøí",-1)),t[8]||(t[8]=(0,o.Lk)("p",{class:"page-subtitle"},"ÈÅ∏ÊìáÈõ£Â∫¶ÈñãÂßãÁ∑¥Áøí",-1)),(0,o.Lk)("div",g,[(0,o.Lk)("div",{class:"level-card",onClick:t[0]||(t[0]=e=>i.goToPractice("basic"))},t[3]||(t[3]=[(0,o.Lk)("div",{class:"level-icon"},"üå±",-1),(0,o.Lk)("h3",{class:"level-title"},"Âü∫Á§é",-1),(0,o.Lk)("p",{class:"level-desc"},"0 - 2000 Â≠ó",-1),(0,o.Lk)("p",{class:"level-count"},"Á¥Ñ 4000 - 5000 Âè•",-1)])),(0,o.Lk)("div",{class:"level-card",onClick:t[1]||(t[1]=e=>i.goToPractice("intermediate"))},t[4]||(t[4]=[(0,o.Lk)("div",{class:"level-icon"},"üåø",-1),(0,o.Lk)("h3",{class:"level-title"},"‰∏≠Á¥ö",-1),(0,o.Lk)("p",{class:"level-desc"},"2000 - 4000 Â≠ó",-1),(0,o.Lk)("p",{class:"level-count"},"Á¥Ñ 4000 - 5000 Âè•",-1)])),(0,o.Lk)("div",{class:"level-card",onClick:t[2]||(t[2]=e=>i.goToPractice("advanced"))},t[5]||(t[5]=[(0,o.Lk)("div",{class:"level-icon"},"üå≥",-1),(0,o.Lk)("h3",{class:"level-title"},"ÈÄ≤Èöé",-1),(0,o.Lk)("p",{class:"level-desc"},"4000 - 6000 Â≠ó",-1),(0,o.Lk)("p",{class:"level-count"},"Á¥Ñ 4000 - 5000 Âè•",-1)]))]),(0,o.Lk)("div",v,[(0,o.bF)(r,{to:"/ListTry50"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("‚Üê ËøîÂõûÊñáÁ´†ÂàóË°®")]))),_:1})])])])}var y={name:"ListSentenceLevel",methods:{goToPractice(e){this.$router.push(`/sentence-practice/${e}`)}}};const w=(0,c.A)(y,[["render",k],["__scopeId","data-v-f28af880"]]);var S=w,m=n(4232);const C={class:"sentence-practice-page"},f={class:"container"},L={class:"top-bar"},x={class:"level-title"},b={class:"today-count"},E={key:0,class:"loading"},I={key:1,class:"error"},_={key:2,class:"practice-area"},R={key:0,class:"sentence-text"},T={key:1,class:"sentence-hidden"},W={class:"control-bar"},X={class:"next-bar"},O={class:"progress-info"},P={key:3,class:"no-sentence"};function D(e,t,n,s,a,i){const r=(0,o.g2)("router-link"),c=(0,o.g2)("SentenceAudioPlayer"),l=(0,o.g2)("TypingSentence"),d=(0,o.g2)("Sentenceinfo");return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",f,[(0,o.Lk)("div",L,[(0,o.bF)(r,{to:"/sentence-level",class:"back-btn"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("‚Üê ËøîÂõû")]))),_:1}),(0,o.Lk)("h2",x,(0,m.v_)(i.levelName)+"Á∑¥Áøí",1),(0,o.Lk)("div",b,"‰ªäÊó•Ôºö"+(0,m.v_)(a.sentenceStore.todayCount)+" Âè•",1)]),a.sentenceStore.isLoading?((0,o.uX)(),(0,o.CE)("div",E," ËºâÂÖ•‰∏≠... ")):a.sentenceStore.error?((0,o.uX)(),(0,o.CE)("div",I,(0,m.v_)(a.sentenceStore.error),1)):a.sentenceStore.currentSentence?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",{class:"sentence-display",onClick:t[0]||(t[0]=e=>a.showInfo=!0)},[a.isHidden?((0,o.uX)(),(0,o.CE)("p",T," ÔºàÁü≠Âè•Â∑≤Èö±ËóèÔºåÈªûÊìäÊí≠ÊîæÊåâÈàïËÅΩÂØ´Ôºâ ")):((0,o.uX)(),(0,o.CE)("p",R,(0,m.v_)(a.sentenceStore.currentSentence.sentence),1)),t[7]||(t[7]=(0,o.Lk)("p",{class:"click-hint"},"ÈªûÊìäÊü•ÁúãÂñÆÂ≠óÂíåÊñáÊ≥ïËß£Êûê",-1))]),(0,o.Lk)("div",W,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.toggleHidden&&i.toggleHidden(...e)),class:"control-btn"},(0,m.v_)(a.isHidden?"üëÅ È°ØÁ§∫":"üôà Èö±Ëóè"),1),(0,o.bF)(c,{sentence:a.sentenceStore.currentSentence.sentence},null,8,["sentence"]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.toggleReview&&i.toggleReview(...e)),class:(0,m.C4)(["control-btn",{active:"Y"===a.sentenceStore.currentSentence.needReview}])},(0,m.v_)("Y"===a.sentenceStore.currentSentence.needReview?"üîÅ ÈúÄË§áÁøí":"‚úì ‰∏çË§áÁøí"),3)]),(0,o.bF)(l,{sentence:a.sentenceStore.currentSentence.sentence,isHidden:a.isHidden,onCompleted:i.onTypingCompleted},null,8,["sentence","isHidden","onCompleted"]),(0,o.Lk)("div",X,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.nextSentence&&i.nextSentence(...e)),class:"next-btn"}," ‰∏ã‰∏ÄÂè• ‚Üí ")]),(0,o.Lk)("div",O,[(0,o.Lk)("span",null,"ÈÄ≤Â∫¶Ôºö"+(0,m.v_)(a.sentenceStore.learnedCount)+" / "+(0,m.v_)(a.sentenceStore.totalSentences),1),(0,o.Lk)("span",null,"Ë§áÁøíÊ∏ÖÂñÆÔºö"+(0,m.v_)(a.sentenceStore.reviewCount)+" Âè•",1)])])):((0,o.uX)(),(0,o.CE)("div",P,[t[8]||(t[8]=(0,o.Lk)("p",null,"ÁõÆÂâçÊ≤íÊúâÂè•Â≠êÂèØÁ∑¥Áøí",-1)),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.loadFirstSentence&&i.loadFirstSentence(...e)),class:"start-btn"},"ÈñãÂßãÁ∑¥Áøí")])),a.showInfo&&a.sentenceStore.currentSentence?((0,o.uX)(),(0,o.Wv)(d,{key:4,sentence:a.sentenceStore.currentSentence,wordExplanations:a.wordExplanations,onClose:t[5]||(t[5]=e=>a.showInfo=!1)},null,8,["sentence","wordExplanations"])):(0,o.Q3)("",!0)])])}n(6573),n(8100),n(7936),n(7467),n(4732),n(9577),n(8992),n(3949),n(4520),n(2577),n(1454);var F=n(657),K=n(3230);const A=(0,F.nY)("sentence",{state:()=>({sentences:[],currentLevel:"",currentIndex:0,todayCount:0,newCount:0,currentSentence:null,isLoading:!1,error:null}),getters:{reviewList:e=>e.sentences.filter((e=>"Y"===e.needReview)),totalSentences:e=>e.sentences.length,reviewCount:e=>e.sentences.filter((e=>"Y"===e.needReview)).length,learnedCount:e=>e.currentIndex},actions:{async loadSentences(e){this.isLoading=!0,this.error=null,this.currentLevel=e;try{const t=`sentences-${e}.xlsx`,n=`/readEnglishV3_2/excel/${t}`,s=await fetch(n);if(!s.ok)throw new Error(`Êâæ‰∏çÂà∞Ê™îÊ°àÔºö${t}`);const o=await s.arrayBuffer(),a=new Uint8Array(o),i=K.LF(a,{type:"array"}),r=i.SheetNames[0],c=i.Sheets[r],l=K.Wp.sheet_to_json(c);return this.sentences=l.map((e=>({id:e.id,sentence:e.sentence||"",targetWords:(e.targetWords||"").split(",").map((e=>e.trim().toLowerCase())),grammar:e.grammar||"",category:e.category||"",needReview:e.needReview||"N"}))),this.loadProgress(e),this.checkDailyReset(),console.log(`‚úÖ ËºâÂÖ• ${t} ÊàêÂäüÔºö${this.sentences.length} Âè•`),!0}catch(t){return console.error("‚ùå ËºâÂÖ•Áü≠Âè• Excel Â§±Êïó:",t),this.error=t.message,!1}finally{this.isLoading=!1}},loadProgress(e){const t=`sentence-index-${e}`,n=localStorage.getItem(t);this.currentIndex=n?parseInt(n,10):0;const s="sentence-today-count",o=localStorage.getItem(s);this.todayCount=o?parseInt(o,10):0},saveProgress(){const e=`sentence-index-${this.currentLevel}`;localStorage.setItem(e,this.currentIndex.toString()),localStorage.setItem("sentence-today-count",this.todayCount.toString()),localStorage.setItem("sentence-today-date",this.getTodayDate())},getTodayDate(){const e=new Date;return e.toISOString().split("T")[0]},checkDailyReset(){const e=localStorage.getItem("sentence-today-date"),t=this.getTodayDate();e!==t&&(this.todayCount=0,this.newCount=0,localStorage.setItem("sentence-today-date",t),localStorage.setItem("sentence-today-count","0"))},getNextSentence(){if(0===this.sentences.length)return this.currentSentence=null,null;if(this.newCount++,this.newCount>=3&&this.reviewList.length>0){const e=Math.floor(Math.random()*this.reviewList.length);this.currentSentence=this.reviewList[e],this.newCount=0}else if(this.currentIndex>=this.sentences.length)if(this.reviewList.length>0){const e=Math.floor(Math.random()*this.reviewList.length);this.currentSentence=this.reviewList[e]}else this.currentIndex=0,this.currentSentence=this.sentences[0],this.currentIndex++;else this.currentSentence=this.sentences[this.currentIndex],this.currentIndex++;return this.todayCount++,this.saveProgress(),this.currentSentence},async updateReview(e,t){try{const n=await fetch("/api/update-review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,needReview:t,level:this.currentLevel})}),s=await n.json();if(s.success){const n=this.sentences.find((t=>t.id===e));return n&&(n.needReview=t),console.log(`‚úÖ ${s.message}`),!0}return console.warn(`‚ö†Ô∏è Êõ¥Êñ∞Â§±ÊïóÔºö${s.message}`),!1}catch(n){console.warn("‚ö†Ô∏è ÁÑ°Ê≥ïÂëºÂè´ APIÔºàÂèØËÉΩÂú® GitHub Pages ‰∏äÔºâ:",n.message);const s=this.sentences.find((t=>t.id===e));return s&&(s.needReview=t),!1}},async toggleReview(e){const t=this.sentences.find((t=>t.id===e));if(t){const n="Y"===t.needReview?"N":"Y";await this.updateReview(e,n)}},getSentenceInfo(e){return this.sentences.find((t=>t.id===e))||null},resetProgress(){this.currentIndex=0,this.newCount=0,this.currentSentence=null,this.saveProgress()},resetTodayCount(){this.todayCount=0,localStorage.setItem("sentence-today-count","0")}}}),N=(0,F.nY)("excel",{state:()=>({headers:[],tableData:[],wordExplanations:{},wordTranslations:{},wordExamples:{},wordPartsOfSpeech:{},wordOneDay:{},wordTwoDay:{},wordThreeDay:{},wordOneWeek:{},wordTwoWeek:{},wordOneMoon:{},wordCloze:{}}),actions:{setExcelData(e,t){this.headers=e,this.tableData=t,this.parseTableDataToDicts(t)},parseTableDataToDicts(e){const t={},n={},s={},o={},a={},i={},r={},c={},l={},d={},u={};e.forEach((e=>{const h={};for(const t in e)Object.hasOwnProperty.call(e,t)&&(h[t.toLowerCase()]=e[t]);const p=(h["word"]||"").toString().toLowerCase().trim();p&&(t[p]=(h["explanation"]||"").toString().trim(),n[p]=(h["translation"]||"").toString().trim(),s[p]=(h["example"]||"").toString().trim(),o[p]=(h["partofspeech"]||"").toString().trim(),a[p]=(h["oneDay"]||"").toString().trim(),i[p]=(h["twoDay"]||"").toString().trim(),r[p]=(h["threeDay"]||"").toString().trim(),c[p]=(h["oneWeek"]||"").toString().trim(),l[p]=(h["twoWeek"]||"").toString().trim(),d[p]=(h["oneMoon"]||"").toString().trim(),u[p]=(h["cloze"]||"").toString().trim())})),this.wordExplanations=t,this.wordTranslations=n,this.wordExamples=s,this.wordPartsOfSpeech=o,this.wordOneDay=a,this.wordTwoDay=i,this.wordThreeDay=r,this.wordOneWeek=c,this.wordTwoWeek=l,this.wordOneMoon=d,this.wordCloze=u}}}),$={class:"typing-sentence"},j={class:"typing-display"},M={class:"typing-controls"},q={class:"practice-count"},G={key:0,class:"completed-msg"},H={key:1,class:"keyboard-layout"};function B(e,t,n,s,a,i){return(0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.sentenceChars,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:(0,m.C4)(i.getCharClass(t))},[n.isHidden?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,m.v_)(t<a.currentIndex?" "===e?"‚ê£":e:"_"),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,m.v_)(" "===e?"‚ê£":e),1)],64))],2)))),128))]),(0,o.Lk)("div",M,[(0,o.Lk)("div",q,"Á∑¥ÁøíÊ¨°Êï∏Ôºö"+(0,m.v_)(a.practiceCount),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.toggleKeyboard&&i.toggleKeyboard(...e)),class:"control-btn"},(0,m.v_)(a.showKeyboard?"‚å® Èö±ËóèÈçµÁõ§":"‚å® È°ØÁ§∫ÈçµÁõ§"),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.restart&&i.restart(...e)),class:"control-btn"}," üîÑ ÈáçÊñ∞Á∑¥Áøí ")]),a.isCompleted?((0,o.uX)(),(0,o.CE)("div",G," ‚úÖ ÂÆåÊàêÔºÅÂèØ‰ª•Êåâ„Äå‰∏ã‰∏ÄÂè•„ÄçÁπºÁ∫å ")):(0,o.Q3)("",!0),a.showKeyboard?((0,o.uX)(),(0,o.CE)("div",H,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.keyboardRows,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"keyboard-row",key:t},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,m.C4)(["key",i.getKeyClass(e)])},(0,m.v_)(" "===e?"Space":e),3)))),128))])))),128))])):(0,o.Q3)("",!0)])}var V={name:"TypingSentence",props:{sentence:{type:String,required:!0},isHidden:{type:Boolean,default:!1}},data(){return{currentIndex:0,practiceCount:0,isCompleted:!1,showKeyboard:!0,keyboardRows:[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","fÃ≤","g","h","jÃ≤","k","l",";"],["z","x","c","v","b","n","m",",",".","/"],[" "]]}},computed:{sentenceChars(){return this.sentence.split("")},currentChar(){return this.sentence[this.currentIndex]?.toLowerCase()||""}},mounted(){window.addEventListener("keydown",this.handleKeyInput)},beforeUnmount(){window.removeEventListener("keydown",this.handleKeyInput)},watch:{sentence(){this.resetState()}},methods:{handleKeyInput(e){if(this.isCompleted)return;if(e.ctrlKey||e.altKey||e.metaKey)return;const t=e.key,n=this.sentence[this.currentIndex];t.toLowerCase()===n.toLowerCase()&&(this.currentIndex++,this.currentIndex>=this.sentence.length&&(this.isCompleted=!0,this.practiceCount++,this.$emit("completed")))," "===e.key&&e.preventDefault()},getCharClass(e){return e<this.currentIndex?"char typed":e===this.currentIndex?"char current":"char pending"},getKeyClass(e){const t=e.replace("Ã≤","").toLowerCase();return t===this.currentChar?"highlight":""},toggleKeyboard(){this.showKeyboard=!this.showKeyboard},restart(){this.currentIndex=0,this.isCompleted=!1},resetState(){this.currentIndex=0,this.isCompleted=!1}}};const U=(0,c.A)(V,[["render",B],["__scopeId","data-v-74273bb0"]]);var Y=U;const Q={class:"sentence-info-panel"},z={class:"panel-header"},J={class:"sentence-section"},Z={class:"sentence-text"},ee={class:"words-section"},te={key:0,class:"word-list"},ne={class:"word-header"},se={class:"word-text"},oe={key:0,class:"word-pos"},ae=["onClick"],ie={key:0,class:"word-translation"},re={key:1,class:"word-explanation"},ce={key:1,class:"no-data"},le={class:"grammar-section"},de={key:0,class:"grammar-list"},ue={class:"grammar-label"},he={class:"grammar-content"},pe={class:"grammar-desc"},ge={key:1,class:"no-data"},ve={key:0,class:"category-section"},ke={class:"category-tag"};function ye(e,t,n,a,i,r){return(0,o.uX)(),(0,o.CE)("div",{class:"sentence-info-overlay",onClick:t[2]||(t[2]=(0,s.D$)((t=>e.$emit("close")),["self"]))},[(0,o.Lk)("div",Q,[(0,o.Lk)("div",z,[t[3]||(t[3]=(0,o.Lk)("h3",null,"Âè•Â≠êËß£Êûê",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},"√ó")]),(0,o.Lk)("div",J,[(0,o.Lk)("p",Z,(0,m.v_)(n.sentence.sentence),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.speakSentence&&r.speakSentence(...e)),class:"speak-btn"},"üîä Êí≠Êîæ")]),(0,o.Lk)("div",ee,[t[4]||(t[4]=(0,o.Lk)("h4",null,"üìñ ÈáçÈªûÂñÆÂ≠ó",-1)),r.wordList.length>0?((0,o.uX)(),(0,o.CE)("div",te,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.wordList,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.word,class:"word-item"},[(0,o.Lk)("div",ne,[(0,o.Lk)("strong",se,(0,m.v_)(e.word),1),e.partOfSpeech?((0,o.uX)(),(0,o.CE)("span",oe,"("+(0,m.v_)(e.partOfSpeech)+")",1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t=>r.speakWord(e.word),class:"speak-word-btn"},"üîä",8,ae)]),e.translation?((0,o.uX)(),(0,o.CE)("p",ie,(0,m.v_)(e.translation),1)):(0,o.Q3)("",!0),e.explanation?((0,o.uX)(),(0,o.CE)("p",re,(0,m.v_)(e.explanation),1)):(0,o.Q3)("",!0)])))),128))])):((0,o.uX)(),(0,o.CE)("p",ce,"Ê≤íÊúâÊâæÂà∞ÂñÆÂ≠óË≥áÊñô"))]),(0,o.Lk)("div",le,[t[5]||(t[5]=(0,o.Lk)("h4",null,"üìù ÊñáÊ≥ïËß£Êûê",-1)),r.grammarList.length>0?((0,o.uX)(),(0,o.CE)("div",de,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.grammarList,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"grammar-item"},[(0,o.Lk)("span",ue,(0,m.v_)(e.label),1),(0,o.Lk)("span",he,(0,m.v_)(e.content),1),(0,o.Lk)("span",pe,"‚Üí "+(0,m.v_)(e.description),1)])))),128))])):((0,o.uX)(),(0,o.CE)("p",ge,"Ê≤íÊúâÊñáÊ≥ïË≥áÊñô"))]),n.sentence.category?((0,o.uX)(),(0,o.CE)("div",ve,[(0,o.Lk)("span",ke,(0,m.v_)(n.sentence.category),1)])):(0,o.Q3)("",!0)])])}var we={name:"SentenceInfo",props:{sentence:{type:Object,required:!0},wordExplanations:{type:Object,default:()=>({})}},computed:{wordList(){return this.sentence.targetWords&&Array.isArray(this.sentence.targetWords)?this.sentence.targetWords.map((e=>{const t=e.toLowerCase();return{word:e,translation:this.getWordData(t,"wordTranslations"),explanation:this.getWordData(t,"wordExplanations"),partOfSpeech:this.getWordData(t,"wordPartsOfSpeech")}})):[]},grammarList(){if(!this.sentence.grammar)return[];const e=this.sentence.grammar.split(";");return e.map((e=>{const t=e.match(/^\[(.+?)\]/),n=t?t[1]:"",s=t?e.replace(/^\[.+?\]/,""):e,o=s.split("‚Üí");return{label:n,content:o[0]?.trim()||"",description:o[1]?.trim()||""}})).filter((e=>e.content||e.description))}},methods:{getWordData(e,t){const n=this.$parent?.excelStore;return n&&n[t]?n[t][e]||"":"wordExplanations"===t&&this.wordExplanations[e]?this.wordExplanations[e]:""},speakSentence(){this.speak(this.sentence.sentence)},speakWord(e){this.speak(e)},speak(e){if("speechSynthesis"in window){const t=window.speechSynthesis;t.speaking&&t.cancel();const n=new SpeechSynthesisUtterance(e);n.lang="en-US",n.rate=.9;const s=t.getVoices(),o=s.find((e=>e.lang.startsWith("en-")&&e.name.includes("Google")))||s.find((e=>e.lang.startsWith("en")));o&&(n.voice=o),t.speak(n)}}}};const Se=(0,c.A)(we,[["render",ye],["__scopeId","data-v-054f8fa0"]]);var me=Se;const Ce={class:"sentence-audio-player"};function fe(e,t,n,s,a,i){return(0,o.uX)(),(0,o.CE)("div",Ce,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.speakSentence&&i.speakSentence(...e)),class:"control-btn"}," üîä Êí≠Êîæ "),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.toggleLoop&&i.toggleLoop(...e)),class:(0,m.C4)(["control-btn",{active:a.isLoop}])}," üîÅ Âæ™Áí∞ ",2),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.stopSpeaking&&i.stopSpeaking(...e)),class:"control-btn"}," ‚èπ ÂÅúÊ≠¢ "),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.cycleSpeed&&i.cycleSpeed(...e)),class:(0,m.C4)(["control-btn",{active:1!==a.speed}])}," ‚è© "+(0,m.v_)(a.speed)+"x ",3),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.toggleRainSound&&i.toggleRainSound(...e)),class:(0,m.C4)(["control-btn",{active:a.isRainPlaying}])}," üåß Èõ®ËÅ≤ ",2)])}var Le={name:"SentenceAudioPlayer",props:{sentence:{type:String,required:!0}},data(){return{isLoop:!1,speed:1,isRainPlaying:!1,audioCtx:null,backgroundGain:null,audioNodes:[]}},beforeUnmount(){this.cleanupRainSound(),this.stopSpeaking()},methods:{speakSentence(){if(this.sentence)if("speechSynthesis"in window){const e=window.speechSynthesis;e.speaking&&e.cancel();const t=new SpeechSynthesisUtterance(this.sentence);t.lang="en-US";const n={1:.8,2:1.2,3:1.8};t.rate=n[this.speed]||.8;const s=e.getVoices(),o=s.find((e=>e.lang.startsWith("en-")&&e.name.includes("Google")))||s.find((e=>e.lang.startsWith("en")));o&&(t.voice=o),this.isLoop&&(t.onend=()=>{this.isLoop&&setTimeout((()=>this.speakSentence()),500)}),e.speak(t)}else alert("ÊÇ®ÁöÑÁÄèË¶ΩÂô®‰∏çÊîØÊè¥Ë™ûÈü≥ÂêàÊàêÂäüËÉΩ„ÄÇ")},toggleLoop(){this.isLoop=!this.isLoop,this.isLoop?this.speakSentence():window.speechSynthesis.cancel()},stopSpeaking(){this.isLoop=!1,"speechSynthesis"in window&&window.speechSynthesis.cancel()},cycleSpeed(){this.speed=3===this.speed?1:this.speed+1},toggleRainSound(){this.isRainPlaying?this.cleanupRainSound():this.startRainSound()},cleanupRainSound(){this.audioNodes.forEach((e=>{try{e.disconnect()}catch(t){console.debug("Node already disconnected")}})),this.audioNodes=[],this.audioCtx&&(this.audioCtx.close(),this.audioCtx=null),this.backgroundGain=null,this.isRainPlaying=!1},startRainSound(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.backgroundGain=this.audioCtx.createGain(),this.backgroundGain.gain.value=.4,this.backgroundGain.connect(this.audioCtx.destination),this.createSteadyRain(),this.createRainVariation(),this.createRaindrops(),this.isRainPlaying=!0},createWhiteNoise(){const e=4096,t=this.audioCtx.createScriptProcessor(e,1,1);return t.onaudioprocess=t=>{const n=t.outputBuffer.getChannelData(0);for(let s=0;s<e;s++)n[s]=2*Math.random()-1},t},createSteadyRain(){const e=this.createWhiteNoise(),t=this.audioCtx.createBiquadFilter();t.type="highpass",t.frequency.value=800;const n=this.audioCtx.createBiquadFilter();n.type="lowpass",n.frequency.value=4e3;const s=this.audioCtx.createGain();s.gain.value=.3,e.connect(t).connect(n).connect(s).connect(this.backgroundGain),this.audioNodes.push(e,t,n,s)},createRainVariation(){const e=this.createWhiteNoise(),t=this.audioCtx.createBiquadFilter();t.type="highpass",t.frequency.value=1200;const n=this.audioCtx.createBiquadFilter();n.type="lowpass",n.frequency.value=5e3;const s=this.audioCtx.createGain();s.gain.value=.15;const o=()=>{if(!this.audioCtx||"closed"===this.audioCtx.state)return;const e=this.audioCtx.currentTime,t=.1+.2*Math.random(),n=5+5*Math.random();s.gain.linearRampToValueAtTime(t,e+n),setTimeout(o,1e3*n)};o(),e.connect(t).connect(n).connect(s).connect(this.backgroundGain),this.audioNodes.push(e,t,n,s)},createRaindrops(){const e=()=>{if(!this.audioCtx||"closed"===this.audioCtx.state)return;const t=.05+.1*Math.random(),n=this.audioCtx.createBuffer(1,this.audioCtx.sampleRate*t,this.audioCtx.sampleRate),s=n.getChannelData(0);for(let e=0;e<s.length;e++)s[e]=(2*Math.random()-1)*Math.exp(-e/s.length*10);const o=this.audioCtx.createBufferSource();o.buffer=n;const a=this.audioCtx.createBiquadFilter();a.type="highpass",a.frequency.value=2e3;const i=this.audioCtx.createGain(),r=.05+.1*Math.random();i.gain.setValueAtTime(r,this.audioCtx.currentTime),i.gain.exponentialRampToValueAtTime(.001,this.audioCtx.currentTime+t),o.connect(a).connect(i).connect(this.audioCtx.destination),o.start();const c=.1+.4*Math.random();setTimeout(e,1e3*c)};e()}}};const xe=(0,c.A)(Le,[["render",fe],["__scopeId","data-v-b2eb91e8"]]);var be=xe,Ee={name:"SentencePractice",components:{TypingSentence:Y,Sentenceinfo:me,SentenceAudioPlayer:be},data(){return{sentenceStore:A(),excelStore:N(),isHidden:!1,showInfo:!1,wordExplanations:{}}},computed:{level(){return this.$route.params.level||"basic"},levelName(){const e={basic:"Âü∫Á§é",intermediate:"‰∏≠Á¥ö",advanced:"ÈÄ≤Èöé"};return e[this.level]||"Âü∫Á§é"}},async created(){await this.loadWordExcel(),await this.sentenceStore.loadSentences(this.level),this.sentenceStore.sentences.length>0&&!this.sentenceStore.currentSentence&&this.sentenceStore.getNextSentence()},methods:{async loadWordExcel(){if(0===Object.keys(this.excelStore.wordExplanations).length)try{const e="/readEnglishV3_2/excel/default.xlsx",t=await fetch(e),n=await t.arrayBuffer(),s=new Uint8Array(n),o=K.LF(s,{type:"array"});let a=[];o.SheetNames.forEach((e=>{const t=o.Sheets[e],n=K.Wp.sheet_to_json(t);a=a.concat(n)})),a.length>0&&this.excelStore.setExcelData(Object.keys(a[0]),a)}catch(e){console.error("ËºâÂÖ•ÂñÆÂ≠ó Excel Â§±Êïó:",e)}this.wordExplanations=this.excelStore.wordExplanations},toggleHidden(){this.isHidden=!this.isHidden},async toggleReview(){this.sentenceStore.currentSentence&&await this.sentenceStore.toggleReview(this.sentenceStore.currentSentence.id)},nextSentence(){this.sentenceStore.getNextSentence(),this.showInfo=!1},onTypingCompleted(){console.log("ÊâìÂ≠óÂÆåÊàêÔºÅ")},loadFirstSentence(){this.sentenceStore.getNextSentence()}},watch:{"$route.params.level":{handler(e){e&&this.sentenceStore.loadSentences(e)}}}};const Ie=(0,c.A)(Ee,[["render",D],["__scopeId","data-v-86fe8180"]]);var _e=Ie;const Re=[{path:"/Listsentencelevel",name:"Listsentencelevel",component:S},{path:"/sentence-level",name:"SentenceLevel",component:S},{path:"/sentence-practice/:level",name:"SentencePractice",component:_e}],Te=(0,u.aE)({history:(0,u.LA)(),routes:Re});var We=Te;const Xe=(0,s.Ef)(d),Oe=(0,F.Ey)();Xe.use(Oe),Xe.use(We),Xe.mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,a){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],a=e[d][2];for(var r=!0,c=0;c<s.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(r=!1,a<i&&(i=a));if(r){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,i=s[0],r=s[1],c=s[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(c)var d=c(n)}for(t&&t(s);l<i.length;l++)a=i[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self["webpackChunkreaed3000en"]=self["webpackChunkreaed3000en"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(6238)}));s=n.O(s)})();
//# sourceMappingURL=app.522042f6.js.map